<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 2400">
  <defs>
    <!-- 渐变定义 -->
    <linearGradient id="headerGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#667eea"/>
      <stop offset="100%" style="stop-color:#764ba2"/>
    </linearGradient>
    <linearGradient id="mode1Grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f093fb"/>
      <stop offset="100%" style="stop-color:#f5576c"/>
    </linearGradient>
    <linearGradient id="mode2Grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#4facfe"/>
      <stop offset="100%" style="stop-color:#00f2fe"/>
    </linearGradient>
    <linearGradient id="mode3Grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#43e97b"/>
      <stop offset="100%" style="stop-color:#38f9d7"/>
    </linearGradient>
    <linearGradient id="mode4Grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#fa709a"/>
      <stop offset="100%" style="stop-color:#fee140"/>
    </linearGradient>
    <linearGradient id="mode5Grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#a8edea"/>
      <stop offset="100%" style="stop-color:#fed6e3"/>
    </linearGradient>
    <linearGradient id="mode6Grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#5ee7df"/>
      <stop offset="100%" style="stop-color:#b490ca"/>
    </linearGradient>
    <linearGradient id="mode7Grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#d299c2"/>
      <stop offset="100%" style="stop-color:#fef9d7"/>
    </linearGradient>

    <!-- 阴影 -->
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="3" dy="3" stdDeviation="5" flood-opacity="0.2"/>
    </filter>

    <!-- 箭头标记 -->
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
    <marker id="arrowheadBlue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#4facfe"/>
    </marker>
    <marker id="arrowheadGreen" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#43e97b"/>
    </marker>
  </defs>

  <!-- 背景 -->
  <rect width="1400" height="2400" fill="#f8fafc"/>

  <!-- 标题 -->
  <rect x="50" y="30" width="1300" height="80" rx="15" fill="url(#headerGrad)" filter="url(#shadow)"/>
  <text x="700" y="82" text-anchor="middle" fill="white" font-size="36" font-weight="bold" font-family="Arial, sans-serif">Agent 执行链路 / 工作模式全景图</text>

  <!-- ==================== 模式1: 单次调用 ==================== -->
  <g transform="translate(50, 140)">
    <rect width="620" height="200" rx="15" fill="white" stroke="#f5576c" stroke-width="2" filter="url(#shadow)"/>
    <rect width="620" height="45" rx="15" fill="url(#mode1Grad)"/>
    <text x="310" y="30" text-anchor="middle" fill="white" font-size="20" font-weight="bold" font-family="Arial, sans-serif">1. 单次调用 (Single Call)</text>

    <!-- 流程图 -->
    <rect x="40" y="70" width="120" height="50" rx="10" fill="#fef3f2" stroke="#f5576c" stroke-width="2"/>
    <text x="100" y="100" text-anchor="middle" fill="#333" font-size="14" font-family="Arial, sans-serif">用户输入</text>

    <line x1="160" y1="95" x2="220" y2="95" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

    <rect x="230" y="70" width="120" height="50" rx="10" fill="#fef3f2" stroke="#f5576c" stroke-width="2"/>
    <text x="290" y="100" text-anchor="middle" fill="#333" font-size="14" font-family="Arial, sans-serif">LLM</text>

    <line x1="350" y1="95" x2="410" y2="95" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

    <rect x="420" y="70" width="120" height="50" rx="10" fill="#fef3f2" stroke="#f5576c" stroke-width="2"/>
    <text x="480" y="100" text-anchor="middle" fill="#333" font-size="14" font-family="Arial, sans-serif">输出结果</text>

    <!-- 说明 -->
    <text x="40" y="155" fill="#666" font-size="13" font-family="Arial, sans-serif">特点: 无工具调用，纯问答</text>
    <text x="40" y="175" fill="#666" font-size="13" font-family="Arial, sans-serif">场景: 简单咨询、解释概念 | 代表: 普通 ChatGPT 对话</text>
  </g>

  <!-- ==================== 模式2: Pipeline ==================== -->
  <g transform="translate(730, 140)">
    <rect width="620" height="200" rx="15" fill="white" stroke="#4facfe" stroke-width="2" filter="url(#shadow)"/>
    <rect width="620" height="45" rx="15" fill="url(#mode2Grad)"/>
    <text x="310" y="30" text-anchor="middle" fill="white" font-size="20" font-weight="bold" font-family="Arial, sans-serif">2. Pipeline / 固定流程</text>

    <!-- 流程图 -->
    <rect x="20" y="65" width="70" height="40" rx="8" fill="#eff6ff" stroke="#4facfe" stroke-width="2"/>
    <text x="55" y="90" text-anchor="middle" fill="#333" font-size="11" font-family="Arial, sans-serif">输入</text>

    <line x1="90" y1="85" x2="110" y2="85" stroke="#4facfe" stroke-width="2" marker-end="url(#arrowheadBlue)"/>

    <rect x="120" y="65" width="70" height="40" rx="8" fill="#eff6ff" stroke="#4facfe" stroke-width="2"/>
    <text x="155" y="90" text-anchor="middle" fill="#333" font-size="11" font-family="Arial, sans-serif">Step1</text>

    <line x1="190" y1="85" x2="210" y2="85" stroke="#4facfe" stroke-width="2" marker-end="url(#arrowheadBlue)"/>

    <rect x="220" y="65" width="70" height="40" rx="8" fill="#eff6ff" stroke="#4facfe" stroke-width="2"/>
    <text x="255" y="90" text-anchor="middle" fill="#333" font-size="11" font-family="Arial, sans-serif">Step2</text>

    <line x1="290" y1="85" x2="310" y2="85" stroke="#4facfe" stroke-width="2" marker-end="url(#arrowheadBlue)"/>

    <rect x="320" y="65" width="70" height="40" rx="8" fill="#eff6ff" stroke="#4facfe" stroke-width="2"/>
    <text x="355" y="90" text-anchor="middle" fill="#333" font-size="11" font-family="Arial, sans-serif">Step3</text>

    <line x1="390" y1="85" x2="410" y2="85" stroke="#4facfe" stroke-width="2" marker-end="url(#arrowheadBlue)"/>

    <rect x="420" y="65" width="70" height="40" rx="8" fill="#dbeafe" stroke="#4facfe" stroke-width="2"/>
    <text x="455" y="90" text-anchor="middle" fill="#333" font-size="11" font-family="Arial, sans-serif">LLM</text>

    <line x1="490" y1="85" x2="510" y2="85" stroke="#4facfe" stroke-width="2" marker-end="url(#arrowheadBlue)"/>

    <rect x="520" y="65" width="70" height="40" rx="8" fill="#eff6ff" stroke="#4facfe" stroke-width="2"/>
    <text x="555" y="90" text-anchor="middle" fill="#333" font-size="11" font-family="Arial, sans-serif">输出</text>

    <!-- 步骤标签 -->
    <text x="155" y="120" text-anchor="middle" fill="#999" font-size="10" font-family="Arial, sans-serif">采集</text>
    <text x="255" y="120" text-anchor="middle" fill="#999" font-size="10" font-family="Arial, sans-serif">处理</text>
    <text x="355" y="120" text-anchor="middle" fill="#999" font-size="10" font-family="Arial, sans-serif">检索</text>
    <text x="455" y="120" text-anchor="middle" fill="#999" font-size="10" font-family="Arial, sans-serif">分析</text>

    <!-- 说明 -->
    <text x="20" y="155" fill="#666" font-size="13" font-family="Arial, sans-serif">特点: 代码写死流程，LLM只做最终分析</text>
    <text x="20" y="175" fill="#666" font-size="13" font-family="Arial, sans-serif">场景: 标准化任务、一键诊断 | 代表: OpsAgentV2</text>
  </g>

  <!-- ==================== 模式3: Function Calling ==================== -->
  <g transform="translate(50, 370)">
    <rect width="620" height="280" rx="15" fill="white" stroke="#43e97b" stroke-width="2" filter="url(#shadow)"/>
    <rect width="620" height="45" rx="15" fill="url(#mode3Grad)"/>
    <text x="310" y="30" text-anchor="middle" fill="white" font-size="20" font-weight="bold" font-family="Arial, sans-serif">3. Function Calling / 工具调用循环</text>

    <!-- 流程图 -->
    <rect x="40" y="70" width="100" height="45" rx="10" fill="#ecfdf5" stroke="#43e97b" stroke-width="2"/>
    <text x="90" y="97" text-anchor="middle" fill="#333" font-size="13" font-family="Arial, sans-serif">用户输入</text>

    <line x1="140" y1="92" x2="180" y2="92" stroke="#43e97b" stroke-width="2" marker-end="url(#arrowheadGreen)"/>

    <rect x="190" y="70" width="80" height="45" rx="10" fill="#d1fae5" stroke="#43e97b" stroke-width="2"/>
    <text x="230" y="97" text-anchor="middle" fill="#333" font-size="13" font-family="Arial, sans-serif">LLM</text>

    <line x1="270" y1="92" x2="310" y2="92" stroke="#43e97b" stroke-width="2" marker-end="url(#arrowheadGreen)"/>

    <!-- 判断菱形 -->
    <polygon points="370,92 410,62 450,92 410,122" fill="#ecfdf5" stroke="#43e97b" stroke-width="2"/>
    <text x="410" y="88" text-anchor="middle" fill="#333" font-size="11" font-family="Arial, sans-serif">调用</text>
    <text x="410" y="102" text-anchor="middle" fill="#333" font-size="11" font-family="Arial, sans-serif">工具?</text>

    <!-- Yes 路径 -->
    <line x1="450" y1="92" x2="490" y2="92" stroke="#43e97b" stroke-width="2" marker-end="url(#arrowheadGreen)"/>
    <text x="470" y="85" fill="#43e97b" font-size="11" font-family="Arial, sans-serif">Yes</text>

    <rect x="500" y="70" width="90" height="45" rx="10" fill="#ecfdf5" stroke="#43e97b" stroke-width="2"/>
    <text x="545" y="97" text-anchor="middle" fill="#333" font-size="13" font-family="Arial, sans-serif">执行工具</text>

    <!-- 循环箭头 -->
    <path d="M545 115 L545 150 L230 150 L230 115" fill="none" stroke="#43e97b" stroke-width="2" marker-end="url(#arrowheadGreen)"/>
    <text x="390" y="168" text-anchor="middle" fill="#43e97b" font-size="11" font-family="Arial, sans-serif">结果返回 LLM</text>

    <!-- No 路径 -->
    <line x1="410" y1="122" x2="410" y2="190" stroke="#43e97b" stroke-width="2" marker-end="url(#arrowheadGreen)"/>
    <text x="425" y="155" fill="#43e97b" font-size="11" font-family="Arial, sans-serif">No</text>

    <rect x="350" y="200" width="120" height="45" rx="10" fill="#d1fae5" stroke="#43e97b" stroke-width="2"/>
    <text x="410" y="227" text-anchor="middle" fill="#333" font-size="13" font-family="Arial, sans-serif">输出结果</text>

    <!-- 说明 -->
    <text x="40" y="225" fill="#666" font-size="13" font-family="Arial, sans-serif">特点: LLM自主决定调用哪个工具，可多轮循环</text>
    <text x="40" y="245" fill="#666" font-size="13" font-family="Arial, sans-serif">场景: 交互式问答、灵活探索</text>
    <text x="40" y="265" fill="#666" font-size="13" font-family="Arial, sans-serif">代表: OpsAgent基础版、大多数Agent项目</text>
  </g>

  <!-- ==================== 模式4: ReAct ==================== -->
  <g transform="translate(730, 370)">
    <rect width="620" height="280" rx="15" fill="white" stroke="#fa709a" stroke-width="2" filter="url(#shadow)"/>
    <rect width="620" height="45" rx="15" fill="url(#mode4Grad)"/>
    <text x="310" y="30" text-anchor="middle" fill="white" font-size="20" font-weight="bold" font-family="Arial, sans-serif">4. ReAct (Reasoning + Acting)</text>

    <!-- ReAct 循环框 -->
    <rect x="30" y="60" width="560" height="160" rx="10" fill="#fef7f0" stroke="#fa709a" stroke-width="1" stroke-dasharray="5,5"/>

    <!-- Thought -->
    <rect x="50" y="75" width="150" height="55" rx="8" fill="#fff4ed" stroke="#fa709a" stroke-width="2"/>
    <text x="125" y="95" text-anchor="middle" fill="#fa709a" font-size="12" font-weight="bold" font-family="Arial, sans-serif">Thought</text>
    <text x="125" y="115" text-anchor="middle" fill="#666" font-size="10" font-family="Arial, sans-serif">我需要先查日志...</text>

    <line x1="200" y1="102" x2="230" y2="102" stroke="#fa709a" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- Action -->
    <rect x="240" y="75" width="150" height="55" rx="8" fill="#fff4ed" stroke="#fa709a" stroke-width="2"/>
    <text x="315" y="95" text-anchor="middle" fill="#fa709a" font-size="12" font-weight="bold" font-family="Arial, sans-serif">Action</text>
    <text x="315" y="115" text-anchor="middle" fill="#666" font-size="10" font-family="Arial, sans-serif">query_logs</text>

    <line x1="390" y1="102" x2="420" y2="102" stroke="#fa709a" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- Observation -->
    <rect x="430" y="75" width="150" height="55" rx="8" fill="#fff4ed" stroke="#fa709a" stroke-width="2"/>
    <text x="505" y="95" text-anchor="middle" fill="#fa709a" font-size="12" font-weight="bold" font-family="Arial, sans-serif">Observation</text>
    <text x="505" y="115" text-anchor="middle" fill="#666" font-size="10" font-family="Arial, sans-serif">发现50条ERROR...</text>

    <!-- 循环箭头 -->
    <path d="M505 130 L505 155 L125 155 L125 130" fill="none" stroke="#fa709a" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="315" y="170" text-anchor="middle" fill="#fa709a" font-size="11" font-family="Arial, sans-serif">循环</text>

    <!-- Final Answer -->
    <rect x="220" y="185" width="180" height="45" rx="8" fill="#fee140" stroke="#fa709a" stroke-width="2"/>
    <text x="310" y="205" text-anchor="middle" fill="#333" font-size="12" font-weight="bold" font-family="Arial, sans-serif">Final Answer</text>
    <text x="310" y="220" text-anchor="middle" fill="#666" font-size="10" font-family="Arial, sans-serif">根因是...</text>

    <!-- 说明 -->
    <text x="30" y="250" fill="#666" font-size="13" font-family="Arial, sans-serif">特点: 显式输出思考过程，推理透明，可解释性强</text>
    <text x="30" y="270" fill="#666" font-size="13" font-family="Arial, sans-serif">场景: 需要可解释性、复杂推理 | 代表: LangChain ReAct Agent</text>
  </g>

  <!-- ==================== 模式5: Plan-and-Execute ==================== -->
  <g transform="translate(50, 680)">
    <rect width="620" height="360" rx="15" fill="white" stroke="#a8edea" stroke-width="2" filter="url(#shadow)"/>
    <rect width="620" height="45" rx="15" fill="url(#mode5Grad)"/>
    <text x="310" y="30" text-anchor="middle" fill="#333" font-size="20" font-weight="bold" font-family="Arial, sans-serif">5. Plan-and-Execute (规划-执行)</text>

    <!-- Phase 1: Planning -->
    <rect x="30" y="60" width="260" height="150" rx="10" fill="#f0fdfa" stroke="#5eead4" stroke-width="2"/>
    <text x="160" y="85" text-anchor="middle" fill="#0d9488" font-size="14" font-weight="bold" font-family="Arial, sans-serif">Phase 1 - 规划</text>

    <rect x="50" y="100" width="220" height="95" rx="8" fill="white" stroke="#5eead4" stroke-width="1"/>
    <text x="160" y="120" text-anchor="middle" fill="#333" font-size="12" font-family="Arial, sans-serif">LLM 生成完整计划:</text>
    <text x="70" y="140" fill="#666" font-size="11" font-family="Arial, sans-serif">1. 查询日志</text>
    <text x="70" y="155" fill="#666" font-size="11" font-family="Arial, sans-serif">2. 查询指标</text>
    <text x="70" y="170" fill="#666" font-size="11" font-family="Arial, sans-serif">3. 检索案例</text>
    <text x="70" y="185" fill="#666" font-size="11" font-family="Arial, sans-serif">4. 综合分析</text>

    <!-- 箭头 -->
    <line x1="290" y1="135" x2="330" y2="135" stroke="#5eead4" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- Phase 2: Execution -->
    <rect x="330" y="60" width="260" height="150" rx="10" fill="#f0fdfa" stroke="#5eead4" stroke-width="2"/>
    <text x="460" y="85" text-anchor="middle" fill="#0d9488" font-size="14" font-weight="bold" font-family="Arial, sans-serif">Phase 2 - 执行</text>

    <rect x="350" y="100" width="220" height="95" rx="8" fill="white" stroke="#5eead4" stroke-width="1"/>
    <text x="460" y="120" text-anchor="middle" fill="#333" font-size="12" font-family="Arial, sans-serif">按计划顺序执行:</text>
    <text x="370" y="140" fill="#43e97b" font-size="11" font-family="Arial, sans-serif">Step 1 ✓</text>
    <text x="370" y="155" fill="#43e97b" font-size="11" font-family="Arial, sans-serif">Step 2 ✓</text>
    <text x="370" y="170" fill="#43e97b" font-size="11" font-family="Arial, sans-serif">Step 3 ✓</text>
    <text x="370" y="185" fill="#43e97b" font-size="11" font-family="Arial, sans-serif">Step 4 ✓</text>

    <!-- Phase 3: Summary -->
    <line x1="460" y1="210" x2="460" y2="240" stroke="#5eead4" stroke-width="2" marker-end="url(#arrowhead)"/>

    <rect x="330" y="250" width="260" height="50" rx="10" fill="#ccfbf1" stroke="#5eead4" stroke-width="2"/>
    <text x="460" y="270" text-anchor="middle" fill="#0d9488" font-size="14" font-weight="bold" font-family="Arial, sans-serif">Phase 3 - 汇总</text>
    <text x="460" y="290" text-anchor="middle" fill="#666" font-size="12" font-family="Arial, sans-serif">汇总所有执行结果，给出结论</text>

    <!-- 说明 -->
    <text x="30" y="320" fill="#666" font-size="13" font-family="Arial, sans-serif">特点: 先规划后执行，计划可审核，执行有条理</text>
    <text x="30" y="340" fill="#666" font-size="13" font-family="Arial, sans-serif">场景: 流程化任务、需要审批 | 代表: LangChain Plan-and-Execute Agent</text>
  </g>

  <!-- ==================== 模式6: Multi-Agent ==================== -->
  <g transform="translate(730, 680)">
    <rect width="620" height="360" rx="15" fill="white" stroke="#b490ca" stroke-width="2" filter="url(#shadow)"/>
    <rect width="620" height="45" rx="15" fill="url(#mode6Grad)"/>
    <text x="310" y="30" text-anchor="middle" fill="#333" font-size="20" font-weight="bold" font-family="Arial, sans-serif">6. Multi-Agent (多智能体协作)</text>

    <!-- Coordinator -->
    <rect x="230" y="60" width="160" height="50" rx="10" fill="#f3e8ff" stroke="#a855f7" stroke-width="2"/>
    <text x="310" y="82" text-anchor="middle" fill="#7c3aed" font-size="14" font-weight="bold" font-family="Arial, sans-serif">Coordinator</text>
    <text x="310" y="100" text-anchor="middle" fill="#666" font-size="11" font-family="Arial, sans-serif">(协调者)</text>

    <!-- 连接线 -->
    <line x1="250" y1="110" x2="120" y2="150" stroke="#a855f7" stroke-width="2"/>
    <line x1="310" y1="110" x2="310" y2="150" stroke="#a855f7" stroke-width="2"/>
    <line x1="370" y1="110" x2="500" y2="150" stroke="#a855f7" stroke-width="2"/>

    <!-- Agent 1 -->
    <rect x="40" y="150" width="160" height="70" rx="10" fill="#faf5ff" stroke="#a855f7" stroke-width="2"/>
    <text x="120" y="175" text-anchor="middle" fill="#7c3aed" font-size="13" font-weight="bold" font-family="Arial, sans-serif">LogExpert</text>
    <text x="120" y="195" text-anchor="middle" fill="#666" font-size="11" font-family="Arial, sans-serif">(日志专家)</text>
    <text x="120" y="212" text-anchor="middle" fill="#999" font-size="10" font-family="Arial, sans-serif">分析日志模式</text>

    <!-- Agent 2 -->
    <rect x="230" y="150" width="160" height="70" rx="10" fill="#faf5ff" stroke="#a855f7" stroke-width="2"/>
    <text x="310" y="175" text-anchor="middle" fill="#7c3aed" font-size="13" font-weight="bold" font-family="Arial, sans-serif">MetricExpert</text>
    <text x="310" y="195" text-anchor="middle" fill="#666" font-size="11" font-family="Arial, sans-serif">(指标专家)</text>
    <text x="310" y="212" text-anchor="middle" fill="#999" font-size="10" font-family="Arial, sans-serif">分析性能指标</text>

    <!-- Agent 3 -->
    <rect x="420" y="150" width="160" height="70" rx="10" fill="#faf5ff" stroke="#a855f7" stroke-width="2"/>
    <text x="500" y="175" text-anchor="middle" fill="#7c3aed" font-size="13" font-weight="bold" font-family="Arial, sans-serif">CaseExpert</text>
    <text x="500" y="195" text-anchor="middle" fill="#666" font-size="11" font-family="Arial, sans-serif">(案例专家)</text>
    <text x="500" y="212" text-anchor="middle" fill="#999" font-size="10" font-family="Arial, sans-serif">检索历史案例</text>

    <!-- 汇总连接 -->
    <line x1="120" y1="220" x2="120" y2="250" stroke="#a855f7" stroke-width="2"/>
    <line x1="310" y1="220" x2="310" y2="250" stroke="#a855f7" stroke-width="2"/>
    <line x1="500" y1="220" x2="500" y2="250" stroke="#a855f7" stroke-width="2"/>
    <line x1="120" y1="250" x2="500" y2="250" stroke="#a855f7" stroke-width="2"/>
    <line x1="310" y1="250" x2="310" y2="270" stroke="#a855f7" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- 汇总输出 -->
    <rect x="230" y="275" width="160" height="45" rx="10" fill="#e9d5ff" stroke="#a855f7" stroke-width="2"/>
    <text x="310" y="302" text-anchor="middle" fill="#7c3aed" font-size="14" font-weight="bold" font-family="Arial, sans-serif">汇总输出</text>

    <!-- 说明 -->
    <text x="30" y="340" fill="#666" font-size="13" font-family="Arial, sans-serif">特点: 专业分工，多角度分析，可并行执行</text>
    <text x="30" y="358" fill="#666" font-size="13" font-family="Arial, sans-serif">场景: 超复杂任务、多领域协作 | 代表: AutoGen, CrewAI</text>
  </g>

  <!-- ==================== 模式7: Self-Reflection ==================== -->
  <g transform="translate(50, 1070)">
    <rect width="620" height="300" rx="15" fill="white" stroke="#d299c2" stroke-width="2" filter="url(#shadow)"/>
    <rect width="620" height="45" rx="15" fill="url(#mode7Grad)"/>
    <text x="310" y="30" text-anchor="middle" fill="#333" font-size="20" font-weight="bold" font-family="Arial, sans-serif">7. Self-Reflection (自我反思)</text>

    <!-- Round 1 -->
    <rect x="30" y="60" width="260" height="80" rx="10" fill="#fdf4ff" stroke="#d946ef" stroke-width="2"/>
    <text x="160" y="85" text-anchor="middle" fill="#a21caf" font-size="14" font-weight="bold" font-family="Arial, sans-serif">Round 1 - 生成</text>
    <text x="160" y="110" text-anchor="middle" fill="#666" font-size="12" font-family="Arial, sans-serif">LLM 分析并给出初始结论</text>
    <text x="160" y="128" text-anchor="middle" fill="#999" font-size="11" font-family="Arial, sans-serif">"根因是数据库连接池耗尽..."</text>

    <!-- 箭头 -->
    <line x1="290" y1="100" x2="330" y2="100" stroke="#d946ef" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- Round 2 -->
    <rect x="330" y="60" width="260" height="130" rx="10" fill="#fdf4ff" stroke="#d946ef" stroke-width="2"/>
    <text x="460" y="85" text-anchor="middle" fill="#a21caf" font-size="14" font-weight="bold" font-family="Arial, sans-serif">Round 2 - 反思</text>
    <text x="460" y="108" text-anchor="middle" fill="#666" font-size="12" font-family="Arial, sans-serif">请审视你的诊断:</text>
    <text x="350" y="128" fill="#666" font-size="11" font-family="Arial, sans-serif">1. 结论是否有数据支撑？</text>
    <text x="350" y="145" fill="#666" font-size="11" font-family="Arial, sans-serif">2. 是否遗漏重要信息？</text>
    <text x="350" y="162" fill="#666" font-size="11" font-family="Arial, sans-serif">3. 建议是否具体可执行？</text>
    <text x="350" y="182" fill="#a21caf" font-size="11" font-family="Arial, sans-serif">如有问题，给出改进版本</text>

    <!-- 最终输出 -->
    <line x1="460" y1="190" x2="460" y2="220" stroke="#d946ef" stroke-width="2" marker-end="url(#arrowhead)"/>

    <rect x="330" y="225" width="260" height="45" rx="10" fill="#f5d0fe" stroke="#d946ef" stroke-width="2"/>
    <text x="460" y="252" text-anchor="middle" fill="#a21caf" font-size="14" font-weight="bold" font-family="Arial, sans-serif">输出最终结果</text>

    <!-- 说明 -->
    <text x="30" y="255" fill="#666" font-size="13" font-family="Arial, sans-serif">特点: 二次确认，减少幻觉，提高准确率</text>
    <text x="30" y="275" fill="#666" font-size="13" font-family="Arial, sans-serif">场景: 高准确率要求、重要决策 | 代表: Reflexion</text>
  </g>

  <!-- ==================== 对比表格 ==================== -->
  <g transform="translate(730, 1070)">
    <rect width="620" height="300" rx="15" fill="white" stroke="#6366f1" stroke-width="2" filter="url(#shadow)"/>
    <rect width="620" height="45" rx="15" fill="#6366f1"/>
    <text x="310" y="30" text-anchor="middle" fill="white" font-size="20" font-weight="bold" font-family="Arial, sans-serif">模式对比总结</text>

    <!-- 表头 -->
    <rect x="20" y="55" width="580" height="35" fill="#e0e7ff"/>
    <text x="70" y="78" text-anchor="middle" fill="#333" font-size="12" font-weight="bold" font-family="Arial, sans-serif">模式</text>
    <text x="160" y="78" text-anchor="middle" fill="#333" font-size="12" font-weight="bold" font-family="Arial, sans-serif">决策者</text>
    <text x="250" y="78" text-anchor="middle" fill="#333" font-size="12" font-weight="bold" font-family="Arial, sans-serif">灵活性</text>
    <text x="340" y="78" text-anchor="middle" fill="#333" font-size="12" font-weight="bold" font-family="Arial, sans-serif">可控性</text>
    <text x="430" y="78" text-anchor="middle" fill="#333" font-size="12" font-weight="bold" font-family="Arial, sans-serif">Token</text>
    <text x="535" y="78" text-anchor="middle" fill="#333" font-size="12" font-weight="bold" font-family="Arial, sans-serif">适用场景</text>

    <!-- 数据行 -->
    <line x1="20" y1="90" x2="600" y2="90" stroke="#c7d2fe" stroke-width="1"/>
    <text x="70" y="110" text-anchor="middle" fill="#4facfe" font-size="11" font-family="Arial, sans-serif">Pipeline</text>
    <text x="160" y="110" text-anchor="middle" fill="#666" font-size="11" font-family="Arial, sans-serif">代码</text>
    <text x="250" y="110" text-anchor="middle" fill="#666" font-size="11" font-family="Arial, sans-serif">低</text>
    <text x="340" y="110" text-anchor="middle" fill="#43e97b" font-size="11" font-family="Arial, sans-serif">高</text>
    <text x="430" y="110" text-anchor="middle" fill="#43e97b" font-size="11" font-family="Arial, sans-serif">低</text>
    <text x="535" y="110" text-anchor="middle" fill="#666" font-size="11" font-family="Arial, sans-serif">标准化任务</text>

    <line x1="20" y1="120" x2="600" y2="120" stroke="#c7d2fe" stroke-width="1"/>
    <text x="70" y="140" text-anchor="middle" fill="#43e97b" font-size="11" font-family="Arial, sans-serif">Func Call</text>
    <text x="160" y="140" text-anchor="middle" fill="#666" font-size="11" font-family="Arial, sans-serif">LLM</text>
    <text x="250" y="140" text-anchor="middle" fill="#666" font-size="11" font-family="Arial, sans-serif">中</text>
    <text x="340" y="140" text-anchor="middle" fill="#666" font-size="11" font-family="Arial, sans-serif">中</text>
    <text x="430" y="140" text-anchor="middle" fill="#666" font-size="11" font-family="Arial, sans-serif">中</text>
    <text x="535" y="140" text-anchor="middle" fill="#666" font-size="11" font-family="Arial, sans-serif">交互问答</text>

    <line x1="20" y1="150" x2="600" y2="150" stroke="#c7d2fe" stroke-width="1"/>
    <text x="70" y="170" text-anchor="middle" fill="#fa709a" font-size="11" font-family="Arial, sans-serif">ReAct</text>
    <text x="160" y="170" text-anchor="middle" fill="#666" font-size="11" font-family="Arial, sans-serif">LLM</text>
    <text x="250" y="170" text-anchor="middle" fill="#43e97b" font-size="11" font-family="Arial, sans-serif">高</text>
    <text x="340" y="170" text-anchor="middle" fill="#f5576c" font-size="11" font-family="Arial, sans-serif">低</text>
    <text x="430" y="170" text-anchor="middle" fill="#f5576c" font-size="11" font-family="Arial, sans-serif">高</text>
    <text x="535" y="170" text-anchor="middle" fill="#666" font-size="11" font-family="Arial, sans-serif">可解释性</text>

    <line x1="20" y1="180" x2="600" y2="180" stroke="#c7d2fe" stroke-width="1"/>
    <text x="70" y="200" text-anchor="middle" fill="#5eead4" font-size="11" font-family="Arial, sans-serif">Plan-Exec</text>
    <text x="160" y="200" text-anchor="middle" fill="#666" font-size="11" font-family="Arial, sans-serif">混合</text>
    <text x="250" y="200" text-anchor="middle" fill="#666" font-size="11" font-family="Arial, sans-serif">中</text>
    <text x="340" y="200" text-anchor="middle" fill="#43e97b" font-size="11" font-family="Arial, sans-serif">高</text>
    <text x="430" y="200" text-anchor="middle" fill="#666" font-size="11" font-family="Arial, sans-serif">中</text>
    <text x="535" y="200" text-anchor="middle" fill="#666" font-size="11" font-family="Arial, sans-serif">流程化任务</text>

    <line x1="20" y1="210" x2="600" y2="210" stroke="#c7d2fe" stroke-width="1"/>
    <text x="70" y="230" text-anchor="middle" fill="#a855f7" font-size="11" font-family="Arial, sans-serif">Multi-Agent</text>
    <text x="160" y="230" text-anchor="middle" fill="#666" font-size="11" font-family="Arial, sans-serif">混合</text>
    <text x="250" y="230" text-anchor="middle" fill="#43e97b" font-size="11" font-family="Arial, sans-serif">高</text>
    <text x="340" y="230" text-anchor="middle" fill="#666" font-size="11" font-family="Arial, sans-serif">中</text>
    <text x="430" y="230" text-anchor="middle" fill="#f5576c" font-size="11" font-family="Arial, sans-serif">很高</text>
    <text x="535" y="230" text-anchor="middle" fill="#666" font-size="11" font-family="Arial, sans-serif">复杂协作</text>

    <line x1="20" y1="240" x2="600" y2="240" stroke="#c7d2fe" stroke-width="1"/>
    <text x="70" y="260" text-anchor="middle" fill="#d946ef" font-size="11" font-family="Arial, sans-serif">Reflection</text>
    <text x="160" y="260" text-anchor="middle" fill="#666" font-size="11" font-family="Arial, sans-serif">LLM</text>
    <text x="250" y="260" text-anchor="middle" fill="#666" font-size="11" font-family="Arial, sans-serif">中</text>
    <text x="340" y="260" text-anchor="middle" fill="#666" font-size="11" font-family="Arial, sans-serif">中</text>
    <text x="430" y="260" text-anchor="middle" fill="#666" font-size="11" font-family="Arial, sans-serif">中</text>
    <text x="535" y="260" text-anchor="middle" fill="#666" font-size="11" font-family="Arial, sans-serif">高准确率</text>

    <!-- 建议 -->
    <rect x="20" y="270" width="580" height="25" rx="5" fill="#fef3c7"/>
    <text x="310" y="288" text-anchor="middle" fill="#92400e" font-size="12" font-weight="bold" font-family="Arial, sans-serif">90% 场景用 Function Calling 就够了，复杂场景再考虑其他模式</text>
  </g>

  <!-- ==================== 实际选择指南 ==================== -->
  <g transform="translate(50, 1400)">
    <rect width="1300" height="200" rx="15" fill="white" stroke="#10b981" stroke-width="2" filter="url(#shadow)"/>
    <rect width="1300" height="45" rx="15" fill="#10b981"/>
    <text x="650" y="30" text-anchor="middle" fill="white" font-size="20" font-weight="bold" font-family="Arial, sans-serif">实际项目选择指南</text>

    <!-- 决策流程 -->
    <rect x="30" y="60" width="180" height="50" rx="10" fill="#ecfdf5" stroke="#10b981" stroke-width="2"/>
    <text x="120" y="90" text-anchor="middle" fill="#333" font-size="13" font-family="Arial, sans-serif">简单问答?</text>

    <line x1="210" y1="85" x2="260" y2="85" stroke="#10b981" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="235" y="78" fill="#10b981" font-size="11" font-family="Arial, sans-serif">Yes</text>

    <rect x="270" y="60" width="150" height="50" rx="10" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
    <text x="345" y="90" text-anchor="middle" fill="#065f46" font-size="13" font-weight="bold" font-family="Arial, sans-serif">单次调用</text>

    <line x1="120" y1="110" x2="120" y2="140" stroke="#10b981" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="135" y="130" fill="#f59e0b" font-size="11" font-family="Arial, sans-serif">No</text>

    <rect x="30" y="145" width="180" height="50" rx="10" fill="#ecfdf5" stroke="#10b981" stroke-width="2"/>
    <text x="120" y="175" text-anchor="middle" fill="#333" font-size="13" font-family="Arial, sans-serif">需要工具调用?</text>

    <line x1="210" y1="170" x2="260" y2="170" stroke="#10b981" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="235" y="163" fill="#10b981" font-size="11" font-family="Arial, sans-serif">Yes</text>

    <rect x="270" y="145" width="150" height="50" rx="10" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
    <text x="345" y="175" text-anchor="middle" fill="#065f46" font-size="13" font-weight="bold" font-family="Arial, sans-serif">Function Calling</text>

    <!-- 第二列 -->
    <rect x="480" y="60" width="180" height="50" rx="10" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
    <text x="570" y="90" text-anchor="middle" fill="#333" font-size="13" font-family="Arial, sans-serif">需要流程可控?</text>

    <line x1="660" y1="85" x2="710" y2="85" stroke="#f59e0b" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="685" y="78" fill="#10b981" font-size="11" font-family="Arial, sans-serif">Yes</text>

    <rect x="720" y="60" width="130" height="50" rx="10" fill="#fde68a" stroke="#f59e0b" stroke-width="2"/>
    <text x="785" y="90" text-anchor="middle" fill="#92400e" font-size="13" font-weight="bold" font-family="Arial, sans-serif">Pipeline</text>

    <rect x="480" y="145" width="180" height="50" rx="10" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
    <text x="570" y="175" text-anchor="middle" fill="#333" font-size="13" font-family="Arial, sans-serif">需要可解释性?</text>

    <line x1="660" y1="170" x2="710" y2="170" stroke="#f59e0b" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="685" y="163" fill="#10b981" font-size="11" font-family="Arial, sans-serif">Yes</text>

    <rect x="720" y="145" width="130" height="50" rx="10" fill="#fde68a" stroke="#f59e0b" stroke-width="2"/>
    <text x="785" y="175" text-anchor="middle" fill="#92400e" font-size="13" font-weight="bold" font-family="Arial, sans-serif">ReAct</text>

    <!-- 第三列 -->
    <rect x="910" y="60" width="180" height="50" rx="10" fill="#fee2e2" stroke="#ef4444" stroke-width="2"/>
    <text x="1000" y="90" text-anchor="middle" fill="#333" font-size="13" font-family="Arial, sans-serif">多领域协作?</text>

    <line x1="1090" y1="85" x2="1140" y2="85" stroke="#ef4444" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="1115" y="78" fill="#10b981" font-size="11" font-family="Arial, sans-serif">Yes</text>

    <rect x="1150" y="60" width="130" height="50" rx="10" fill="#fecaca" stroke="#ef4444" stroke-width="2"/>
    <text x="1215" y="90" text-anchor="middle" fill="#991b1b" font-size="13" font-weight="bold" font-family="Arial, sans-serif">Multi-Agent</text>

    <rect x="910" y="145" width="180" height="50" rx="10" fill="#fee2e2" stroke="#ef4444" stroke-width="2"/>
    <text x="1000" y="175" text-anchor="middle" fill="#333" font-size="13" font-family="Arial, sans-serif">需要高准确率?</text>

    <line x1="1090" y1="170" x2="1140" y2="170" stroke="#ef4444" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="1115" y="163" fill="#10b981" font-size="11" font-family="Arial, sans-serif">Yes</text>

    <rect x="1150" y="145" width="130" height="50" rx="10" fill="#fecaca" stroke="#ef4444" stroke-width="2"/>
    <text x="1215" y="175" text-anchor="middle" fill="#991b1b" font-size="13" font-weight="bold" font-family="Arial, sans-serif">Self-Reflection</text>
  </g>

  <!-- ==================== OpsAgent 项目对应 ==================== -->
  <g transform="translate(50, 1630)">
    <rect width="1300" height="180" rx="15" fill="white" stroke="#8b5cf6" stroke-width="2" filter="url(#shadow)"/>
    <rect width="1300" height="45" rx="15" fill="#8b5cf6"/>
    <text x="650" y="30" text-anchor="middle" fill="white" font-size="20" font-weight="bold" font-family="Arial, sans-serif">OPS-Agent 项目模式对应</text>

    <!-- OpsAgent 基础版 -->
    <rect x="50" y="60" width="550" height="100" rx="10" fill="#f5f3ff" stroke="#8b5cf6" stroke-width="2"/>
    <text x="325" y="85" text-anchor="middle" fill="#7c3aed" font-size="16" font-weight="bold" font-family="Arial, sans-serif">OpsAgent (基础版)</text>
    <text x="325" y="110" text-anchor="middle" fill="#666" font-size="13" font-family="Arial, sans-serif">模式: Function Calling 多轮循环</text>
    <text x="325" y="130" text-anchor="middle" fill="#666" font-size="13" font-family="Arial, sans-serif">特点: LLM 自主决定调用哪个工具，支持交互追问</text>
    <text x="325" y="150" text-anchor="middle" fill="#999" font-size="12" font-family="Arial, sans-serif">适用: CLI 交互式问答场景</text>

    <!-- OpsAgentV2 升级版 -->
    <rect x="700" y="60" width="550" height="100" rx="10" fill="#f5f3ff" stroke="#8b5cf6" stroke-width="2"/>
    <text x="975" y="85" text-anchor="middle" fill="#7c3aed" font-size="16" font-weight="bold" font-family="Arial, sans-serif">OpsAgentV2 (升级版)</text>
    <text x="975" y="110" text-anchor="middle" fill="#666" font-size="13" font-family="Arial, sans-serif">模式: Pipeline 固定流程</text>
    <text x="975" y="130" text-anchor="middle" fill="#666" font-size="13" font-family="Arial, sans-serif">特点: 采集 → 压缩 → RAG → 时间线 → LLM分析</text>
    <text x="975" y="150" text-anchor="middle" fill="#999" font-size="12" font-family="Arial, sans-serif">适用: API 一键诊断场景</text>
  </g>

  <!-- 页脚 -->
  <text x="700" y="1850" text-anchor="middle" fill="#999" font-size="14" font-family="Arial, sans-serif">Agent 执行链路全景图 | OPS-Agent 项目文档</text>
</svg>